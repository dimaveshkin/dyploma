<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href='https://fonts.googleapis.com/css?family=Forum' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="./fonts/fontello/css/fontello.css">
    <link rel="stylesheet" href="./css/main.css">
</head>
<body>
<div class="wrapper">
    <header class="header">
        <nav class="nav">
            <ul class="nav-list">
                <li class="nav-list-item"><a href="index.html">Главная</a></li>
                <li class="nav-list-item"><a href="">Об авторе</a></li>
                <li class="nav-list-item"><a href="">Галерея</a></li>
                <li class="nav-list-item"><a href="">Фототуры</a></li>
                <li class="nav-list-item"><a href="">Фотоклуб</a></li>
                <li class="nav-list-item"><a href="http://www.profileschool.ru/teacher/show/id/14">Обучение</a></li>
                <li class="nav-list-item"><a href="http://dima-chatrov.livejournal.com/">Блог</a></li>
                <li class="nav-list-item"><a href="">Контакты</a></li>
            </ul>
        </nav>
    </header>
    <div class="main">
        <div id="gallery-accordion">
            <h3>По странам</h3>
            <div class="accordion-item">
                <ul class="cities-gallery gallery-slider">
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Непал</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Италия</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Россия</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Россия</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Непал</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Италия</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Россия</p>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                        <p class="img-caption">Россия</p>
                    </li>
                </ul>
                <span class="show-all-cities show-all">Показать все</span>
            </div>
            <h3>Избранные</h3>
            <div class="accordion-item">
                <ul class="gallery-slider best-gallery">
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img slider-img"></div>
                    </li>
                </ul>
                <span class="show-all-best show-all">Показать все</span>
            </div>
            <h3>Все на одной странице</h3>
            <div class="accordion-item">
                <ul class="all-gallery">
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                    </li>
                    <li class="gallery-img-item city-item">
                        <div class="gallery-img"></div>
                    </li>
                </ul>
                <span class="show-all-img show-all">Показать все</span>
            </div>
        </div>
    </div>
    <footer class="footer">
        <ul class="socials">
            <li class="socials-item"><a href=""><span class="social-icon icon-twitter"></span></a></li>
            <li class="socials-item"><a href=""><span class="social-icon icon-facebook"></span></a></li>
            <li class="socials-item"><a href=""><span class="social-icon icon-vkontakte"></span></a></li>
            <li class="socials-item"><a href=""><span class="social-icon icon-pinterest"></span></a></li>
            <li class="socials-item"><a href=""><span class="social-icon icon-instagram"></span></a></li>
            <li class="socials-item"><a href=""><span class="social-icon icon-gplus"></span></a></li>
        </ul>
    </footer>
</div>

<div class="overlay"></div>
<div class="popup">
    <div class="close-popup">&times;</div>
    <ul >
        <li><img src="images/old/israel_1.jpg"></li>

            <img src="images/old/italy_1.jpg">
            <img src="images/old/nepal_1.jpg">
            <img src="images/old/russia_1.jpg">

    </ul>
</div>

<script src="./libs/jquery-2.2.2.min.js"></script>
<script src="./libs/jquery.bxslider.min.js"></script>
<script src="./js/all.js"></script>
<script>
    var slidersOpt = {
        minSlides: 4,
        maxSlides: 4,
        slideWidth: 1000,
        slideMargin: 16,
        pager: false,
        adaptiveHeight: true
    };

    var citiesSlider = $('.cities-gallery').bxSlider(slidersOpt),
            bestSlider = $('.best-gallery').bxSlider(slidersOpt),
            allSlider = $('.all-gallery').bxSlider(slidersOpt);


    $('.show-all-cities').on('click', function () {
        toggleGallery(this, citiesSlider);
    });

    $('.show-all-best').on('click', function () {
        toggleGallery(this, bestSlider);
    });
    $('.show-all-img').on('click', function () {
        toggleGallery(this, allSlider);
    });


    $('.slider-img').on('click', function () {
//        var slide = img.index(this);

//        bxslider.reloadSlider({ startSlide: slide });
//       var gallery =  $(this);
//        console.log(gallery);

        $('.popup, .overlay').addClass('js-show');
    });

    $(this).keydown(function(eventObject){
        if (eventObject.which == 27){
            closePopUp();
        }
    });

    $('.overlay, .close-popup').on('click', function() {
        closePopUp();
    });



    function  closePopUp() {
        $('.popup, .overlay').removeClass('js-show');
    }

    function toggleGallery(element, slider) {
        if( $(element).prev().hasClass('images-gallery')) {
            $(element).prev().removeClass('images-gallery');
            slider.bxSlider(slidersOpt);
            $(element).text('Показать все');

        } else {
            slider.destroySlider();
            $(element).prev().addClass('images-gallery');
            $(element).text('Скрыть');
        }
    }



    //    $('.gallery-img').on('click', function () {
    //        console.log($(this).css('background-image'));
    //    });
</script>
</body>
</html>